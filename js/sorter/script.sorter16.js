const idTeamsElement = document.getElementById("Torneio");
const idTeamssValue = idTeamsElement.value;

//Oitavas
//Botão 1
const btn1 = document.getElementById('btn1');
var btntxt1 = btn1.textContent;

btn1.addEventListener('click', function handleClick() {
  btnp1.textContent = btntxt1;
  time1 = btntxt1;
  document.getElementById("btn2").style.opacity = "20%";
  document.getElementById("btn1").style.opacity = "100%";
});
// Botão 2
const btn2 = document.getElementById('btn2');
var btntxt2 = btn2.textContent;

btn2.addEventListener('click', function handleClick() {
  btnp1.textContent = btntxt2;
  time1 = btntxt2;
  document.getElementById("btn1").style.opacity = "20%";
  document.getElementById("btn2").style.opacity = "100%";
});
// Botão 3
const btn3 = document.getElementById('btn3');
var btntxt3 = btn3.textContent;

btn3.addEventListener('click', function handleClick() {
  btnp2.textContent = btntxt3;
  time2 = btntxt3;
  document.getElementById("btn4").style.opacity = "20%";
  document.getElementById("btn3").style.opacity = "100%";
});
// Botão 4
const btn4 = document.getElementById('btn4');
var btntxt4 = btn4.textContent;

btn4.addEventListener('click', function handleClick() {
  btnp2.textContent = btntxt4;
  time2 = btntxt4;
  document.getElementById("btn3").style.opacity = "20%";
  document.getElementById("btn4").style.opacity = "100%";
});
// Botão 5
const btn5 = document.getElementById('btn5');
var btntxt5 = btn5.textContent;

btn5.addEventListener('click', function handleClick() {
  btnp3.textContent = btntxt5;
  time3 = btntxt5;
  document.getElementById("btn6").style.opacity = "20%";
  document.getElementById("btn5").style.opacity = "100%";
});
// Botão 6
const btn6 = document.getElementById('btn6');
var btntxt6 = btn6.textContent;

btn6.addEventListener('click', function handleClick() {
  btnp3.textContent = btntxt6;
  time3 = btntxt6;
  document.getElementById("btn5").style.opacity = "20%";
  document.getElementById("btn6").style.opacity = "100%";
});
// Botão 7
const btn7 = document.getElementById('btn7');
var btntxt7 = btn7.textContent;

btn7.addEventListener('click', function handleClick() {
  btnp4.textContent = btntxt7;
  time4 = btntxt7;
  document.getElementById("btn8").style.opacity = "20%";
  document.getElementById("btn7").style.opacity = "100%";
});
// Botão 8
const btn8 = document.getElementById('btn8');
var btntxt8 = btn8.textContent;

btn8.addEventListener('click', function handleClick() {
  btnp4.textContent = btntxt8;
  time4 = btntxt8;
  document.getElementById("btn7").style.opacity = "20%";
  document.getElementById("btn8").style.opacity = "100%";
});
// Botão 9
const btn9 = document.getElementById('btn9');
var btntxt9 = btn9.textContent;

btn9.addEventListener('click', function handleClick() {
  btnp5.textContent = btntxt9;
  time5 = btntxt9;
  document.getElementById("btn10").style.opacity = "20%";
  document.getElementById("btn9").style.opacity = "100%";
});
// Botão 10
const btn10 = document.getElementById('btn10');
var btntxt10 = btn10.textContent;

btn10.addEventListener('click', function handleClick() {
  btnp5.textContent = btntxt10;
  time5 = btntxt10;
  document.getElementById("btn9").style.opacity = "20%";
  document.getElementById("btn10").style.opacity = "100%";
});
// Botão 11
const btn11 = document.getElementById('btn11');
var btntxt11 = btn11.textContent;

btn11.addEventListener('click', function handleClick() {
  btnp6.textContent = btntxt11;
  time6 = btntxt11;
  document.getElementById("btn12").style.opacity = "20%";
  document.getElementById("btn11").style.opacity = "100%";
});
// Botão 12
const btn12 = document.getElementById('btn12');
var btntxt12 = btn12.textContent;

btn12.addEventListener('click', function handleClick() {
  btnp6.textContent = btntxt12;
  time6 = btntxt12;
  document.getElementById("btn11").style.opacity = "20%";
  document.getElementById("btn12").style.opacity = "100%";
});
// Botão 13
const btn13 = document.getElementById('btn13');
var btntxt13 = btn13.textContent;

btn13.addEventListener('click', function handleClick() {
  btnp7.textContent = btntxt13;
  time7 = btntxt13;
  document.getElementById("btn14").style.opacity = "20%";
  document.getElementById("btn13").style.opacity = "100%";
});
// Botão 14
const btn14 = document.getElementById('btn14');
var btntxt14 = btn14.textContent;

btn14.addEventListener('click', function handleClick() {
  btnp7.textContent = btntxt14;
  time7 = btntxt14;
  document.getElementById("btn13").style.opacity = "20%";
  document.getElementById("btn14").style.opacity = "100%";
});
// Botão 15
const btn15 = document.getElementById('btn15');
var btntxt15 = btn15.textContent;

btn15.addEventListener('click', function handleClick() {
  btnp8.textContent = btntxt15;
  time8 = btntxt15;
  document.getElementById("btn16").style.opacity = "20%";
  document.getElementById("btn15").style.opacity = "100%";
});
// Botão 16
const btn16 = document.getElementById('btn16');
var btntxt16 = btn16.textContent;

btn16.addEventListener('click', function handleClick() {
  btnp8.textContent = btntxt16;
  time8 = btntxt16;
  document.getElementById("btn15").style.opacity = "20%";
  document.getElementById("btn16").style.opacity = "100%";
});
//Quartas
// Botão 1
const btnp1 = document.getElementById('btnp1');

btnp1.addEventListener('click', function handleClick() {
  var btntxt17 = btnp1.textContent;
  btnf1.textContent = btntxt17;
  timep1 = btntxt17;
  document.getElementById("btnp2").style.opacity = "20%";
  document.getElementById("btnp1").style.opacity = "100%";
});
// Botão 2
const btnp2 = document.getElementById('btnp2');

btnp2.addEventListener('click', function handleClick() {
  var btntxt18 = btnp2.textContent;
  btnf1.textContent = btntxt18;
  timep1 = btntxt18;
  document.getElementById("btnp1").style.opacity = "20%";
  document.getElementById("btnp2").style.opacity = "100%";
});
// Botão 3
const btnp3 = document.getElementById('btnp3');

btnp3.addEventListener('click', function handleClick() {
  var btntxt19 = btnp3.textContent;
  btnf2.textContent = btntxt19;
  timep2 = btntxt19;
  document.getElementById("btnp4").style.opacity = "20%";
  document.getElementById("btnp3").style.opacity = "100%";
});
// Botão 4
const btnp4 = document.getElementById('btnp4');

btnp4.addEventListener('click', function handleClick() {
  var btntxt20 = btnp4.textContent;
  btnf2.textContent = btntxt20;
  timep2 = btntxt20;
  document.getElementById("btnp3").style.opacity = "20%";
  document.getElementById("btnp4").style.opacity = "100%";
});
// Botão 5
const btnp5 = document.getElementById('btnp5');

btnp5.addEventListener('click', function handleClick() {
  var btntxt21 = btnp5.textContent;
  btnf3.textContent = btntxt21;
  timep3 = btntxt21;
  document.getElementById("btnp6").style.opacity = "20%";
  document.getElementById("btnp5").style.opacity = "100%";
});
// Botão 6
const btnp6 = document.getElementById('btnp6');

btnp6.addEventListener('click', function handleClick() {
  var btntxt22 = btnp6.textContent;
  btnf3.textContent = btntxt22;
  timep3 = btntxt22;
  document.getElementById("btnp5").style.opacity = "20%";
  document.getElementById("btnp6").style.opacity = "100%";
});
// Botão 7
const btnp7 = document.getElementById('btnp7');

btnp7.addEventListener('click', function handleClick() {
  var btntxt23 = btnp7.textContent;
  btnf4.textContent = btntxt23;
  timep4 = btntxt23;
  document.getElementById("btnp8").style.opacity = "20%";
  document.getElementById("btnp7").style.opacity = "100%";
});
// Botão 8
const btnp8 = document.getElementById('btnp8');

btnp8.addEventListener('click', function handleClick() {
  var btntxt24 = btnp8.textContent;
  btnf4.textContent = btntxt24;
  timep4 = btntxt24;
  document.getElementById("btnp7").style.opacity = "20%";
  document.getElementById("btnp8").style.opacity = "100%";
});
//Semi-Final
// Botão 1
const btnf1 = document.getElementById('btnf1');

btnf1.addEventListener('click', function handleClick() {
  var btntxt25 = btnf1.textContent;
  btne1.textContent = btntxt25;
  timef1 = btntxt25;
  document.getElementById("btnf2").style.opacity = "20%";
  document.getElementById("btnf1").style.opacity = "100%";
});
// Botão 2
const btnf2 = document.getElementById('btnf2');

btnf2.addEventListener('click', function handleClick() {
  var btntxt26 = btnf2.textContent;
  btne1.textContent = btntxt26;
  timef1 = btntxt26;
  document.getElementById("btnf1").style.opacity = "20%";
  document.getElementById("btnf2").style.opacity = "100%";
});
// Botão 3
const btnf3 = document.getElementById('btnf3');

btnf3.addEventListener('click', function handleClick() {
  var btntxt27 = btnf3.textContent;
  btne2.textContent = btntxt27;
  timef2 = btntxt27;
  document.getElementById("btnf4").style.opacity = "20%";
  document.getElementById("btnf3").style.opacity = "100%";
});
// Botão 4
const btnf4 = document.getElementById('btnf4');

btnf4.addEventListener('click', function handleClick() {
  var btntxt28 = btnf4.textContent;
  btne2.textContent = btntxt28;
  timef2 = btntxt28;
  document.getElementById("btnf3").style.opacity = "20%";
  document.getElementById("btnf4").style.opacity = "100%";
});

//Final
// Botão 1
const btne1 = document.getElementById('btne1');

btne1.addEventListener('click', function handleClick() {
  var btntxt29 = btne1.textContent;
  btnef.textContent = btntxt29;
  timeef = btntxt29;
  document.getElementById("btne2").style.opacity = "20%";
  document.getElementById("btne1").style.opacity = "100%";
});

// Botão 2
const btne2 = document.getElementById('btne2');

btne2.addEventListener('click', function handleClick() {
  var btntxt30 = btne2.textContent;
  btnef.textContent = btntxt30;
  timeef = btntxt30;
  document.getElementById("btne1").style.opacity = "20%";
  document.getElementById("btne2").style.opacity = "100%";
});

//BTNSAVE
//Time1
var time1, time2, time3, time4, time5, time6, time7, time8;
var timep1, timep2, timep3, timep4;
var timef1, timef2;
var timeef;

const btnSave = document.getElementById('btnsave');
btnSave.addEventListener('click', function saveClick(e) {
  e.preventDefault();


  const dados = {
    time1: btnp1.textContent || 0,
    time2: btnp2.textContent || 0,
    time3: btnp3.textContent || 0,
    time4: btnp4.textContent || 0,
    time5: btnp5.textContent || 0,
    time6: btnp6.textContent || 0,
    time7: btnp7.textContent || 0,
    time8: btnp8.textContent || 0,
    timep1: btnf1.textContent || 0,
    timep2: btnf2.textContent || 0,
    timep3: btnf3.textContent || 0,
    timep4: btnf4.textContent || 0,
    timef1: btne1.textContent || 0,
    timef2: btne2.textContent || 0,
    timeef: btnef.textContent || 0,
  }

  function filterData(dados) {
    let dadosFiltrados = {}
    for (const time in dados) {
      if (dados[time] == undefined) {
        dadosFiltrados[time] = 0
      } else {
        dadosFiltrados[time] = dados[time];
      };
    }
    return dadosFiltrados;
  }

  const dadosFiltrados = filterData(dados);
  dadosFiltrados.idTorneio = idTeamssValue;

  $.ajax({ method: "POST", url: "funcionais/cadastroJogos16.php", data: dadosFiltrados })
});

//Clear
const btnclear = document.getElementById('btnclear');
var btntxtclear1 = "";

btnclear.addEventListener('click', function handleClick() {
  btnp1.textContent = btntxtclear1;
  btnp2.textContent = btntxtclear1;
  btnp3.textContent = btntxtclear1;
  btnp4.textContent = btntxtclear1;
  btnp5.textContent = btntxtclear1;
  btnp6.textContent = btntxtclear1;
  btnp7.textContent = btntxtclear1;
  btnp8.textContent = btntxtclear1;
  btnf1.textContent = btntxtclear1;
  btnf2.textContent = btntxtclear1;
  btnf3.textContent = btntxtclear1;
  btnf4.textContent = btntxtclear1;
  btne1.textContent = btntxtclear1;
  btne2.textContent = btntxtclear1;
  btnef.textContent = btntxtclear1;
  const dados = {
    time1: 0,
    time2: 0,
    time3: 0,
    time4: 0,
    time5: 0,
    time6: 0,
    time7: 0,
    time8: 0,
    timep1: 0,
    timep2: 0,
    timep3: 0,
    timep4: 0,
    timef1: 0,
    timef2: 0,
    timeef: 0,
  }
  dados.idTorneio = idTeamssValue;
  $.ajax({ method: "POST", url: "funcionais/cadastroJogos16.php", data: dados });
});

function altCss() {

  const buttonsFirstGames = [btn1, btn2, btn3, btn4, btn5, btn6, btn7, btn8, btn9, btn10, btn11, btn12, btn13, btn14, btn15, btn16]
  const buttonsSecondGames = [btnp1, btnp2, btnp3, btnp4, btnp5, btnp6, btnp7, btnp8]
  const buttonsThirdGames = [btnf1, btnf2, btnf3, btnf4]
  const buttonsForthGames = [btne1, btne2]
  const buttonsEnd = [btnef]

  buttonsSecondGames.forEach((item, indice) => {

    const { imp, par } = separeArray(buttonsFirstGames);
    if (item.textContent == "") {
    }
    else if (imp[indice].textContent != item.textContent) {
      imp[indice].style.opacity = "20%";
    }
    else if (par[indice].textContent != item.textContent) {
      par[indice].style.opacity = "20%";
    }
  });

  buttonsThirdGames.forEach((item, indice) => {
    const { imp, par } = separeArray(buttonsSecondGames);
    if (item.textContent == "") {
    }
    else if (imp[indice].textContent != item.textContent) {
      imp[indice].style.opacity = "20%";
    }
    else if (par[indice].textContent != item.textContent) {
      par[indice].style.opacity = "20%";
    }
  });

  buttonsForthGames.forEach((item, indice) => {
    const { imp, par } = separeArray(buttonsThirdGames);
    if (item.textContent == "") {
    }
    else if (imp[indice].textContent != item.textContent) {
      imp[indice].style.opacity = "20%";
    }
    else if (par[indice].textContent != item.textContent) {
      par[indice].style.opacity = "20%";
    }
  });

  buttonsEnd.forEach((item, indice) => {
    const { imp, par } = separeArray(buttonsForthGames);
    if (item.textContent == "") {
    }
    else if (imp[indice].textContent != item.textContent) {
      imp[indice].style.opacity = "20%";
    }
    else if (par[indice].textContent != item.textContent) {
      par[indice].style.opacity = "20%";
    }
  });
}

function separeArray(array) {
  imp = [];
  par = [];
  for (let i = 0; i < array.length; i++) {
    if (i & 1) {
      imp.push(array[i]);
    } else {
      (par.push(array[i]))
    };
  }
  return {
    imp,
    par
  };
}

altCss();
